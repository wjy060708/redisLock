# redis实现分布式锁
## 1.定义
  一个操作要修改用户的状态，修改状态需要先读出用户的状态，在内存里进行修改，改完了在存回去。如果这样的操作同时进行，就     会出现并发问题，因为“读取”和“存在状态”这个操作不是原子操作（原子操作是指不会被线程调度机制打断的操作，这种操作一旦开     始，就 会一直运行到结束，中间不会任何线程的切换）这个时候就需要分布式锁来保证同一时间修改数据的进程数。
## 2.分布式锁的条件
  * 可以保证在分布式部署的应用集群中，同一个方法在同一时间只能被一台机器-上的一个线程执行。
  * 避免死锁（可重入锁）
  * 高可用的释放或获取锁
  * 性能保障
## 3.redis实现分布式锁的原理
  * redis指令setnx(set if not exists 即：当key不存在时才能进行设置，反之则放弃此次操作)允许一个客户端进行操作。
  * 获取锁：setnx(key, value) 释放锁del(key)
  * 且先到先得，可保证锁的公平性
  
### 3.1 存在一个问题？
  
  
  
